(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(t,e,i){"use strict";var s=i(3),n=i(6),a=i(21);e.a={options:{TEXTURE_WIDTH:n.a.mobile?32:128,TEXTURE_HEIGHT:n.a.mobile?32:128,mobile:n.a.mobile},colors:{green:"#92e821",yellow:"#c7ff00",cyan:"#00edd1",magenta:"#cc00ff",darkBlue:"#1e2251",black:"#000000"},graphics:{pixelRatio:Object(a.a)(window.devicePixelRatio,1,1.5),maxFrameBufferSize:n.a.mobile?new s.a(1024,576):new s.a(1920,1080)}}},53:function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return g}));var s=i(79),n=i(48),a=i(30),o=i(1),r=i(50),h=i(12),l=i(6),c=i(5),d=i(2),u=i(8),m=i(61),p=i(60),v=i(56),f=i(58),E=i(13);class g{constructor({el:t}){this.onChangeSection=t=>{const{data:e,duration:i}=t;if(this.CURRENT_TRANSITION!==e){if(this.WEBGL_SUPPORT){let t=e;if(t/=this.TOTAL_DURATION,this.mainTransition&&this.mainTransition.kill(),Math.abs(this.CURRENT_TRANSITION-e)>1)this.grid.fadeOutIn(1===e),setTimeout(()=>{this.transitionProgress=t,this.masterTl.progress(this.transitionProgress)},300);else{const e={value:this.transitionProgress};this.mainTransition=h.a.to(e,{value:t,duration:i||this.MAIN_DURATION,onUpdate:()=>{this.transitionProgress=e.value,this.masterTl.progress(e.value)}})}}else this.el.dataset.background="home-section-"+e;this.CURRENT_TRANSITION=e}},this.onRouterEnter=t=>{const e=t.data;"home"===e?this.WEBGL_SUPPORT?(this.grid.setNamespace(e),this.shape.center(e)):this.el.dataset.background="home-section-0":this.WEBGL_SUPPORT?(this.grid.setNamespace(e),this.shape.reset(e)):this.el.dataset.background="generic"},this.onRouterLeave=t=>{"home"===t.data&&this.CURRENT_TRANSITION>0&&this.fadeOutIn()},this.animate=t=>{this.background.render(),this.grid.update(t.data),0===this.transitionProgress&&this.shape.update(t.data),this.render()},this.onResize=()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.fov=window.innerWidth<=1024?40:30,this.camera.updateProjectionMatrix(),this.setRendererSize()},this.el=t,this.testSupport(),l.a.webgl=this.WEBGL_SUPPORT,this.WEBGL_SUPPORT?this.init():(document.body.classList.add("no-webgl"),"home"===l.a.namespace?this.el.dataset.background="home-section-0":this.el.dataset.background="generic",d.a.addListener(u.a.HOME_SCROLLER_CHANGE_SECTION,this.onChangeSection),d.a.addListener(u.a.ROUTER_ENTER,this.onRouterEnter))}testSupport(){this.rendererOptions={antialias:!1,alpha:!1},this.WEBGL_SUPPORT=!0;const t=document.createElement("canvas").getContext("webgl");let e=0;t.getExtension("OES_texture_float")||(e=1);let i=0;if(0==t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)&&(i=1,this.WEBGL_SUPPORT=!1),1===e)if(r.a.isWebGL2Available()){const t=document.createElement("canvas"),e=t.getContext("webgl2",{alpha:!1});this.rendererOptions.canvas=t,this.rendererOptions.context=e}else document.body.appendChild(r.a.getWebGL2ErrorMessage()),this.WEBGL_SUPPORT=!1}init(){this.initEngine(),this.prepare()}prepare(){this.initScene(),this.setupTransitions(),"home"===l.a.namespace&&this.shape.setCenter(),this.IS_DEBUG=!1;const t=Object(f.a)();if(t.section){this.IS_DEBUG=!0,document.body.classList.add("webgl-debug");const e=parseFloat(t.section)/this.TRANSITIONS_COUNT;this.masterTl.progress(e)}d.a.addListener(c.a.RESIZE_CHANGE,this.onResize),this.IS_DEBUG||d.a.addListener(u.a.HOME_SCROLLER_CHANGE_SECTION,this.onChangeSection),d.a.addListener(u.a.ROUTER_ENTER,this.onRouterEnter),d.a.addListener(u.a.ROUTER_BEFORE_LEAVE,this.onRouterLeave),d.a.addListener(c.a.RAF_UPDATE,this.animate)}initEngine(){this.renderer=new s.a(this.rendererOptions),this.renderer.autoClear=!1,this.renderer.setPixelRatio(E.a.graphics.devicePixelRatio),this.el.appendChild(this.renderer.domElement),this.scene=new n.a,this.baseSize=Math.sqrt(E.a.graphics.maxFrameBufferSize.x*E.a.graphics.maxFrameBufferSize.y),this.maxSize=this.baseSize*this.baseSize,this.setRendererSize(),this.camera=new a.a(30,window.innerWidth/window.innerHeight,1,15e3),this.camera.position.copy(new o.a(0,600,1100)),this.camera.rotation.x=-.62,t.fadeOutIn=this.fadeOutIn.bind(this)}initScene(){this.background=new m.a(this.renderer),this.grid=new p.a(this.renderer,this.scene,this.camera,l.a.namespace,this.cloudImg),this.scene.add(this.grid),this.shape=new v.a(l.a.namespace),this.scene.add(this.shape)}initGUI(){const t=l.a.gui.addFolder("camera"),e={lookAt:()=>{this.camera.lookAt(new o.a)}};["x","y","z"].forEach(e=>{t.add(this.camera.position,e,0,15e3,1).name("position "+e)}),["x","y","z"].forEach(e=>{t.add(this.camera.rotation,e,-Math.PI,Math.PI,.01).name("rotation "+e)}),t.add(e,"lookAt"),t.add(this.camera,"fov",30,100,1).onChange(()=>{this.camera.updateProjectionMatrix()}),t.add(this.camera,"near",.1,1,.01).onChange(()=>{this.camera.updateProjectionMatrix()}),t.add(this.camera,"far",1e3,1e5,1).onChange(()=>{this.camera.updateProjectionMatrix()})}setupTransitions(){this.CURRENT_TRANSITION=0,this.TRANSITIONS_COUNT=8,this.TOTAL_DURATION=1*this.TRANSITIONS_COUNT,this.MAIN_DURATION=2,this.transitionProgress=0,this.masterTl=h.a.timeline({paused:!0}),this.transitionsTl=[];this.grid.setupTransitions(this.masterTl,this.TRANSITIONS_COUNT),this.shape.setupTransitions(this.masterTl,this.TRANSITIONS_COUNT)}fadeOutIn(){this.mainTransition&&this.mainTransition.kill(),this.grid.fadeOutIn(),setTimeout(()=>{this.transitionProgress=0,this.masterTl.progress(this.transitionProgress)},300),this.WEBGL_SUPPORT||(this.el.dataset.background="home-section-0"),this.CURRENT_TRANSITION=0}render(){this.renderer.render(this.scene,this.camera)}calculateRenderSize(){let t=window.innerWidth,e=window.innerHeight;if(window.innerWidth*window.innerHeight>this.maxSize){const i=e/t;t=this.baseSize,e=Math.floor(this.baseSize*i);const s=t*e,n=Math.sqrt(this.maxSize/s);t=Math.floor(t*n),e=Math.floor(e*n)}return{width:t,height:e}}setRendererSize(){const{width:t,height:e}=this.calculateRenderSize();this.renderer.setSize(t,e),this.renderer.domElement.style.width=window.innerWidth+"px",this.renderer.domElement.style.height=window.innerHeight+"px"}}}).call(this,i(39))},56:function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));var s=i(45),n=i(1),a=i(20),o=i(80),r=i(7),h=i(49),l=i(78),c=i(57),d=i.n(c),u=i(12),m=i(6),p=i(2),v=i(8),f=i(13),E=i(21);class g extends s.a{constructor(t){super(),this.setupTl1=(t,e)=>{t.to(this.position,{z:-200,ease:"sine.inout",duration:.5},e),t.to(this.materials,{opacity:0,duration:.5},e),t.add(()=>{this.visible=!0},e+.5),t.add(()=>{this.visible=!1},e+.5)},this.onIntroDisplay=()=>{"home"!==this.currentNamespace&&1!==this.materials[0].opacity&&(this.tween&&this.tween.kill(),this.tween=u.a.to(this.materials,{opacity:1,duration:.5}))},this.onIntroHide=()=>{"home"!==this.currentNamespace&&0!==this.materials[0].opacity&&(this.tween&&this.tween.kill(),this.tween=u.a.to(this.materials,{opacity:0,duration:.5}))},this.COUNT=16,this.SCALE=50,this.RADIUS=250,this.simplex=new d.a("4"),this.lines=[],this.materials=[];for(let t=0;t<this.COUNT;t++)this.createLine(t);this.position.x=270,this.position.y=468,this.position.z=530,this.rotation.x=-.2,this.rotation.y=.14,this.currentNamespace=t,this.setupAnims(),this.addListeners()}addListeners(){p.a.addListener(v.a.INTRO_DISPLAY,this.onIntroDisplay),p.a.addListener(v.a.INTRO_HIDE,this.onIntroHide)}getPoint(t,e){let i=Math.cos(t)*this.RADIUS,s=Math.sin(t)*this.RADIUS;Math.PI,Math.acos(2*s-1);let a=75*this.simplex.noise3D(i/500,s/500,0);return a*=e,i=Math.cos(t)*(this.RADIUS+a),s=Math.sin(t)*(this.RADIUS+a),new n.a(i,s,0)}createLine(t){const e=t/this.COUNT,i=2*Math.PI/30,s=[];for(let t,n=0;n<=2*Math.PI;n+=i)t=this.getPoint(n,e),s.push(t);const n=(new a.a).setFromPoints(new o.a(s,!0).getPoints(200)),c=new r.a(f.a.colors.magenta).lerp(new r.a(f.a.colors.cyan),e),d=new h.a({color:c,transparent:!0}),u=new l.a(n,d);this.materials.push(d);const m=Object(E.b)(.8,1,e);u.scale.set(m,m,m),u.rotation.y=-.02*t,this.add(u),this.lines.push(u)}setupTransitions(t,e){this.setupTl1(t,0)}setupAnims(){this.IS_CENTERED=!1,this.tl=u.a.timeline({paused:!0,onComplete:()=>{this.IS_CENTERED=!0},onReverseComplete:()=>{this.IS_CENTERED=!1}}),this.tl.to(this.position,{x:330,y:-200,z:-60,duration:1,ease:"none"},0),this.tl.to(this.rotation,{x:-.34,y:-.55,duration:1,ease:"none"},0)}center(t){this.IS_CENTERED||(this.tl.play(),this.currentNamespace=t)}setCenter(){this.tl.progress(1)}reset(t){this.tl.reverse(),this.currentNamespace=t}initGUI(){const t=m.a.gui.addFolder("shape");["x","y","z"].forEach(e=>{t.add(this.position,e,-3e3,3e3,1).name("position "+e)}),["x","y","z"].forEach(e=>{t.add(this.rotation,e,-Math.PI,Math.PI,.01).name("rotation "+e)})}update(){this.rotation.z+=.005}}},58:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));const s=()=>{const t={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(e,i,s)=>{t[i]=s});return t}},60:function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var s=i(45),n=i(82),a=i(0),o=i(55),r=i(38),h=i(3),l=i(15),c=i(7),d=i(20),u=i(10),m=i(83),p=i(12),v=i(6),f=i(48),E=i(81),g=i(44),T=i(54),y=i(37),x=i(13);class w{constructor(t,e,i){this.TEXTURE_WIDTH=x.a.options.TEXTURE_WIDTH,this.TEXTURE_HEIGHT=x.a.options.TEXTURE_HEIGHT,this.AMOUNT=this.TEXTURE_WIDTH*this.TEXTURE_HEIGHT,this.renderer=t,this.mainScene=e,this.scene=new f.a,this.orthoCamera=new E.a(-.5,.5,.5,-.5,0,1),this.rtt=new g.a(this.TEXTURE_HEIGHT,this.TEXTURE_WIDTH,{wrapS:a.l,wrapT:a.l,minFilter:a.bb,magFilter:a.bb,format:a.sb,type:a.I,depthTest:!1,depthWrite:!1,depthBuffer:!1,stencilBuffer:!1});const s=new T.a;this.mesh=new y.a(s,i),this.mesh.frustumCulled=!1,this.scene.add(this.mesh)}update(t){this.renderer.setRenderTarget(this.rtt),this.renderer.render(this.scene,this.orthoCamera),this.renderer.setRenderTarget(null)}}var R=i.p+"assets/images/64f69b3b452c3913ea3e06c7be565d1d.png",S=i.p+"assets/images/47564cd8d76ab68fabedb3bda96df57e.jpg";class b extends s.a{constructor(t,e,i,s){super(),this.setupTl1=(t,e)=>{t.to(this.renderMaterial.uniforms.masterAlpha,{value:0,duration:.3},e),t.add(()=>{this.visible=!0},e+.3),t.add(()=>{this.visible=!1},e+.3),t.add(()=>{this.visible=!1},e+1.5),t.add(()=>{this.visible=!0},e+1.5),t.to(this.renderMaterial.uniforms.masterAlpha,{value:1,duration:.3},e+1.5)},this.setupTl2=(t,e)=>{t.to(this.camera.position,{y:1700,z:0,duration:.7,ease:"none"},e+.3),t.to(this.camera.rotation,{x:-1.57,duration:.7,ease:"none"},e+.3),t.to([this.simulationMaterial.uniforms.transition1,this.renderMaterial.uniforms.transition1],{value:1,duration:1,ease:"none"},e)},this.setupTl3=(t,e)=>{t.to(this.camera.position,{x:0,y:150,z:2715,duration:1,ease:"none"},e),t.to(this.camera.rotation,{x:0,duration:1,ease:"none"},e),t.to([this.simulationMaterial.uniforms.transition2,this.renderMaterial.uniforms.transition2],{value:1,duration:1,ease:"none"},e)},this.setupTl4=(t,e)=>{t.to(this.camera.position,{y:0,z:500,duration:1,ease:"none"},e),t.to(this.camera.rotation,{x:0,duration:1,ease:"none"},e),t.to([this.simulationMaterial.uniforms.transition3,this.renderMaterial.uniforms.transition3],{value:1,duration:1,ease:"none"},e)},this.setupTl5=(t,e)=>{t.to(this.camera.position,{z:9e3,duration:1,ease:"none"},e),t.to(this.camera.rotation,{x:.02,y:.12,z:0,duration:1,ease:"none"},e),t.to([this.simulationMaterial.uniforms.transition4,this.renderMaterial.uniforms.transition4],{value:1,duration:1,ease:"none"},e)},this.setupTl6=(t,e)=>{t.to(this.camera.position,{y:0,z:5500,duration:1,ease:"none"},e),t.to(this.camera.rotation,{x:0,y:0,z:0,duration:1,ease:"none"},e),t.to([this.simulationMaterial.uniforms.transition5,this.renderMaterial.uniforms.transition5],{value:1,duration:.75,ease:"none"},e)},this.setupTl7=(t,e)=>{t.to([this.simulationMaterial.uniforms.transition6,this.renderMaterial.uniforms.transition6],{value:1,duration:.75,ease:"none"},e)},this.setupTl8=(t,e)=>{t.to(this.camera.position,{x:0,y:400,z:850,duration:.75,ease:"none"},e),t.to(this.camera.rotation,{x:-.5,y:0,z:0,duration:1,ease:"none"},e),t.to([this.simulationMaterial.uniforms.transition7,this.renderMaterial.uniforms.transition7],{value:1,duration:.35,ease:"none"},e+.65)},this.renderer=t,this.scene=e,this.camera=i,this.isHome="home"===s,this.TEXTURE_WIDTH=x.a.options.TEXTURE_WIDTH,this.TEXTURE_HEIGHT=x.a.options.TEXTURE_HEIGHT,this.AMOUNT=this.TEXTURE_WIDTH*this.TEXTURE_HEIGHT,this.dim=2e3,this.createGrid(),this.createGroups(),this.createSphere(),this.createInfinity(),this.createSimulation(),this.fbo=new w(this.renderer,this.scene,this.simulationMaterial),this.createRender(),this.createCloud();(new n.a).load(R,t=>{this.noiseTexture=t,this.noiseTexture.wrapS=a.fc,this.noiseTexture.wrapT=a.fc,this.simulationMaterial.uniforms.textureNoise.value=this.noiseTexture})}setNamespace(t){this.isHome="home"===t,this.renderMaterial.uniforms.isHome.value=this.isHome,this.simulationMaterial.uniforms.isHome.value=this.isHome}createGrid(){this.gridData=new Float32Array(4*this.AMOUNT);let t=0;for(let e=0;e<this.TEXTURE_WIDTH;e++)for(let i=0;i<this.TEXTURE_HEIGHT;i++)t=e*this.TEXTURE_HEIGHT*4+4*i,this.gridData[t]=this.dim/2-this.dim*(e/this.TEXTURE_WIDTH),this.gridData[t+1]=0,this.gridData[t+2]=this.dim/2-this.dim*(i/this.TEXTURE_HEIGHT),this.gridData[t+3]=Math.random()}createGroups(){const t=new Float32Array(4*this.AMOUNT),e=Math.ceil(Math.sqrt(this.AMOUNT/3));this.SPLIT_WIDTH=e,this.SPLIT_HEIGHT=e;let i;const s=this.dim/3,n=2*-this.dim,a=.5*this.dim,o=s;for(let e=0;e<this.SPLIT_WIDTH;e++)for(let s=0;s<this.SPLIT_HEIGHT;s++){i=e*this.SPLIT_HEIGHT*4+4*s;const r=Math.random(),h=Math.random(),l=2*Math.PI*r,c=Math.acos(2*h-1),d=Math.sin(c)*Math.cos(l),u=Math.sin(c)*Math.sin(l),m=Math.cos(c);t[i]=n+o*d,t[i+1]=a+o*u,t[i+2]=0+o*m,t[i+3]=0,this.gridData[i+1]=0}let r=0;const h=1.5*s;for(let e=0;e<this.SPLIT_WIDTH;e++)for(let s=0;s<this.SPLIT_HEIGHT;s++){r=e*this.SPLIT_HEIGHT*4+4*s;const n=Math.random(),a=Math.random(),o=2*Math.PI*n,l=Math.acos(2*a-1),c=Math.sin(l)*Math.cos(o),d=Math.sin(l)*Math.sin(o),u=Math.cos(l);t[i+r]=0+h*c,t[i+r+1]=0+1.5*h*d,t[i+r+2]=0+h*u,t[i+r+3]=.5,this.gridData[i+r+1]=.5}let l=i+r,c=0;const d=this.dim,u=-this.dim,m=s;for(let e=0;e<this.SPLIT_WIDTH;e++)for(let i=0;i<this.SPLIT_HEIGHT;i++){c=e*this.SPLIT_HEIGHT*4+4*i;const s=Math.random(),n=Math.random(),a=2*Math.PI*s,o=Math.acos(2*n-1),r=Math.sin(o)*Math.cos(a),h=Math.sin(o)*Math.sin(a),p=Math.cos(o);t[l+c]=d+m*r,t[l+c+1]=0+m*h,t[l+c+2]=u+m*p,t[l+c+3]=1,this.gridData[l+c+1]=1}this.groupPositions=this.createDataTexture(t),this.defaultPositions=this.createDataTexture(this.gridData)}createSphere(){const t=new Float32Array(4*this.AMOUNT),e=this.dim;let i=0;for(let s=0;s<this.TEXTURE_WIDTH;s++)for(let n=0;n<this.TEXTURE_HEIGHT;n++){i=s*this.TEXTURE_HEIGHT*4+4*n;const a=Math.random(),o=Math.random(),r=2*Math.PI*a,h=Math.acos(2*o-1),l=Math.sin(h)*Math.cos(r),c=Math.sin(h)*Math.sin(r),d=Math.cos(h);t[i]=e*l,t[i+1]=e*c,t[i+2]=e*d,t[i+3]=0}this.spherePositions=this.createDataTexture(t)}createInfinity(){const t=new Float32Array(4*this.AMOUNT);this.dim;let e=0,i=0;const s=this.TEXTURE_WIDTH*this.TEXTURE_HEIGHT;for(let n=0;n<this.TEXTURE_WIDTH;n++)for(let a=0;a<this.TEXTURE_HEIGHT;a++){i++,e=n*this.TEXTURE_HEIGHT*4+4*a;const o=i/s*Math.PI*2,r=.8*this.dim+.2*this.dim*Math.random(),h=2/(3-Math.cos(2*o)),l=h*Math.cos(o),c=h*Math.sin(2*o)/2;t[e]=r*l,t[e+1]=r*c,t[e+2]=Math.random(),t[e+3]=i/s}this.infinityPositions=this.createDataTexture(t)}getImage(){const t=document.createElement("canvas"),e=this.TEXTURE_WIDTH;t.width=t.height=e;const i=t.getContext("2d");i.drawImage(this.cloudImg,0,0,e,e);const s=i.getImageData(0,0,e,e).data,n=new Float32Array(4*this.AMOUNT);let a=0,o=0;for(let t=0;t<this.TEXTURE_WIDTH;t++)for(let e,i=0;i<this.TEXTURE_HEIGHT;i++)a=i*this.TEXTURE_HEIGHT*4+4*t,e=s[o]/255,n[a]=this.dim/2-this.dim*(i/this.TEXTURE_WIDTH),n[a+1]=this.dim/2-this.dim*(t/this.TEXTURE_HEIGHT),n[a+2]=e,n[a+3]=e>.1?1:0,o+=4;return n}createCloud(){this.cloudImg=new Image,this.cloudImg.onload=t=>{const e=this.getImage();this.cloudPositions=this.createDataTexture(e),this.simulationMaterial.uniforms.texturePositionD.value=this.cloudPositions.texture},this.cloudImg.crossOrigin="anonymous",this.cloudImg.src=S}createDataTexture(t){const e={};return e.texture=new o.a(t,this.TEXTURE_HEIGHT,this.TEXTURE_WIDTH,a.sb,a.D),e.texture.minFilter=a.bb,e.texture.magFilter=a.bb,e.texture.needsUpdate=!0,e.texture.generateMipmaps=!1,e.texture.flipY=!1,e}createSimulation(){this.simulationMaterial=new r.a({uniforms:{resolution:{type:"v2",value:new h.a(this.TEXTURE_HEIGHT,this.TEXTURE_WIDTH)},textureNoise:{type:"t",value:this.noiseTexture},texturePosition:{type:"t",value:this.defaultPositions.texture},texturePositionB:{type:"t",value:this.groupPositions.texture},texturePositionC:{type:"t",value:this.spherePositions.texture},texturePositionD:{type:"t",value:null},texturePositionE:{type:"t",value:this.infinityPositions.texture},transition1:{type:"f",value:0},transition2:{type:"f",value:0},transition3:{type:"f",value:0},transition4:{type:"f",value:0},transition5:{type:"f",value:0},transition6:{type:"f",value:0},transition7:{type:"f",value:0},time:{type:"f",value:0},frequency:{type:"f",value:.2},amplitude:{type:"f",value:100},curlTimeFrequency:{type:"f",value:.1},curlFrequency:{type:"f",value:25e-5},curlAmplitude:{type:"f",value:110},curlDistance:{type:"f",value:23},isHome:{type:"f",value:this.isHome}},vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n\tvUv = uv;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\n#define PI 3.1415926535897932384626433832795\n\nvec4 permute(vec4 x){return mod(x*x*34.+x,289.);}\nfloat snoise(vec3 v){\n  const vec2 C = 1./vec2(6,3);\n  const vec4 D = vec4(0,.5,1,2);\n  vec3 i  = floor(v + dot(v, C.yyy));\n  vec3 x0 = v - i + dot(i, C.xxx);\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1. - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n  vec3 x1 = x0 - i1 + C.x;\n  vec3 x2 = x0 - i2 + C.y;\n  vec3 x3 = x0 - D.yyy;\n  i = mod(i,289.);\n  vec4 p = permute( permute( permute(\n\t  i.z + vec4(0., i1.z, i2.z, 1.))\n\t+ i.y + vec4(0., i1.y, i2.y, 1.))\n\t+ i.x + vec4(0., i1.x, i2.x, 1.));\n  vec3 ns = .142857142857 * D.wyz - D.xzx;\n  vec4 j = p - 49. * floor(p * ns.z * ns.z);\n  vec4 x_ = floor(j * ns.z);\n  vec4 x = x_ * ns.x + ns.yyyy;\n  vec4 y = floor(j - 7. * x_ ) *ns.x + ns.yyyy;\n  vec4 h = 1. - abs(x) - abs(y);\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n  vec4 sh = -step(h, vec4(0));\n  vec4 a0 = b0.xzyw + (floor(b0)*2.+ 1.).xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + (floor(b1)*2.+ 1.).xzyw*sh.zzww ;\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n  vec4 norm = inversesqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  vec4 m = max(.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.);\n  return .5 + 12. * dot( m * m * m, vec4( dot(p0,x0), dot(p1,x1),dot(p2,x2), dot(p3,x3) ) );\n}\n\nvec3 snoiseVec3( vec3 x ){\n  return vec3(  snoise(vec3( x )*2.-1.),\n\t\t\t\t\t\t\t\tsnoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ))*2.-1.,\n\t\t\t\t\t\t\t\tsnoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 )*2.-1.)\n\t);\n}\n\nvec3 curlNoise( vec3 p ){\n  const float e = .1;\n  vec3 dx = vec3( e   , 0.0 , 0.0 );\n  vec3 dy = vec3( 0.0 , e   , 0.0 );\n  vec3 dz = vec3( 0.0 , 0.0 , e   );\n\n  vec3 p_x0 = snoiseVec3( p - dx );\n  vec3 p_x1 = snoiseVec3( p + dx );\n  vec3 p_y0 = snoiseVec3( p - dy );\n  vec3 p_y1 = snoiseVec3( p + dy );\n  vec3 p_z0 = snoiseVec3( p - dz );\n  vec3 p_z1 = snoiseVec3( p + dz );\n\n  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n  const float divisor = 1.0 / ( 2.0 * e );\n  return normalize( vec3( x , y , z ) * divisor );\n}\n\nuniform vec2 resolution;\n\nuniform sampler2D textureNoise;\nuniform sampler2D texturePosition;\nuniform sampler2D texturePositionB;\nuniform sampler2D texturePositionC;\nuniform sampler2D texturePositionD;\nuniform sampler2D texturePositionE;\n\nuniform float time;\nuniform float frequency;\nuniform float amplitude;\n\nuniform float curlTimeFrequency;\nuniform float curlFrequency;\nuniform float curlAmplitude;\nuniform float curlDistance;\nuniform float isHome;\n\nuniform float transition1;\nuniform float transition2;\nuniform float transition3;\nuniform float transition4;\nuniform float transition5;\nuniform float transition6;\nuniform float transition7;\n\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nmat3 rotation3dX(float angle) {\n\tfloat s = sin(angle);\n\tfloat c = cos(angle);\n\n\treturn mat3(\n\t\t1.0, 0.0, 0.0,\n\t\t0.0, c, s,\n\t\t0.0, -s, c\n\t);\n}\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\t// Get positions from texture\n\tvec4 posRaw = texture2D( texturePosition, uv );\n    vec4 pos = vec4(posRaw.r, 0, posRaw.b, posRaw.a);\n\tvec4 pos2 = texture2D( texturePositionB, uv );\n\tvec4 spherePos = texture2D( texturePositionC, uv );\n\tvec4 cloudPos = texture2D( texturePositionD, uv );\n\tvec4 infinityPos = texture2D( texturePositionE, uv );\n\n\t// Noises\n\tvec2 nUv = uv;\n\tnUv.x += time * frequency;\n\tnUv.y += time * frequency;\n\n\tvec4 noise = texture2D( textureNoise, nUv);\n\tfloat displacement = noise.r * amplitude;\n\n    float fromCenter = distance(uv, vec2(0.4, 0.5));\n    fromCenter = 1.0 - smoothstep(0.1, 0.4, fromCenter);\n    float noiseAlpha = noise.r * fromCenter;\n\n\t// Section 0 / 1\n\tvec3 section0 = pos.rgb;\n\tsection0.y += displacement;\n\n    if (isHome == 0.0) {\n        gl_FragColor = vec4(section0, noiseAlpha);\n        return;\n    }\n\n    section0.x *= 1.0 + 2. * (transition1 - transition2);\n    section0.z *= 1.0 + pos.a * (transition1 - transition2);\n\n    // Section 2\n    float y = (uv.y + floor(uv.x * 10.)) * PI * 2.5;\n    float nx = map(uv.x, 0.0, 1.0, -1.0, 1.0);\n    float ny = map(uv.y, 0.0, 1.0, -1.0, 1.0);\n\n    float i = ny + (sin(PI * 0.5 * nx) * cos(0.5 * PI * ny));\n    float curveAmp = (40. * (sin(y) + sin(2.2 * y + 5.52)) * (sin(i * 5.) / i));\n\tsection0.y += curveAmp * (transition2 - transition3);\n\n    // Section 3\n    vec3 curlPos = (pos2.rgb * curlFrequency) + time * curlTimeFrequency;\n\tvec3 curl = curlNoise( curlPos ) * curlAmplitude;\n\n\tvec3 section3 = spherePos.rgb;\n\tsection3 += curl;\n    section3 *= 0.25;\n    section3 = rotation3dX(3.14 + time * 0.3) * section3;\n\n\t// Section 4\n\tvec3 tar = pos2.rgb;\n\ttar += curl;\n\tfloat d = length(pos2.rgb - tar) / curlDistance;\n\n\tvec3 section4 = mix(pos2.rgb, tar, d * (1.0 - transition5));\n\n    // Section 5\n    vec3 section5 = cloudPos.rgb;\n    section5 += curl * 0.25;\n\n    // Section 7\n    vec3 section7 = vec3(infinityPos.r, infinityPos.g, 0.0);\n    section7 *= 0.75;\n    section7 += curl * 0.25 + displacement;\n    // section7 += displacement * 2.;\n\n\t// Final Pos\n\tvec3 finalPos = mix(section0, section3, transition3);\n\tfinalPos = mix(finalPos, section4, transition4);\n\tfinalPos = mix(finalPos, section5, transition5);\n\tfinalPos = mix(finalPos, section7, transition6);\n\tfinalPos = mix(finalPos, section0, transition7);\n\n    float alpha = mix(noiseAlpha, curveAmp / 100., transition2 - transition3);\n    alpha = mix(alpha, cloudPos.a * noise.r, transition5 - transition7);\n\n\tgl_FragColor = vec4(finalPos, alpha);\n\n}\n",blending:a.fb,transparent:!0,fog:!1,lights:!1,depthWrite:!1,depthTest:!1})}createRender(){this.renderMaterial=new r.a({uniforms:l.a.merge([{textureDefaultPosition:{type:"t",value:this.defaultPositions.texture},texturePosition:{type:"t",value:null},textureInfinity:{type:"t",value:this.infinityPositions.texture},time:{type:"f",value:0},dim:{type:"f",value:this.fbo.dim},green:{type:"c",value:new c.a(x.a.colors.green)},yellow:{type:"c",value:new c.a(x.a.colors.yellow)},cyan:{type:"c",value:new c.a(x.a.colors.cyan)},magenta:{type:"c",value:new c.a(x.a.colors.magenta)},transition1:{type:"f",value:0},transition2:{type:"f",value:0},transition3:{type:"f",value:0},transition4:{type:"f",value:0},transition5:{type:"f",value:0},transition6:{type:"f",value:0},transition7:{type:"f",value:0},masterAlpha:{type:"f",value:1},isHome:{type:"f",value:this.isHome}}]),vertexShader:"precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D textureDefaultPosition;\nuniform sampler2D texturePosition;\nuniform sampler2D textureInfinity;\nuniform float dim;\nuniform float time;\n\nuniform float transition1;\nuniform float transition2;\nuniform float transition6;\nuniform float transition7;\n\nvarying float vColorGroup;\nvarying float vRatio;\nvarying float vInf;\nvarying float vInfinity;\nvarying vec3 vPos;\nvarying vec2 vUv;\n\n#include <common>\n\nfloat when_gt(float x, float y) {\n    return max(sign(x - y), 0.0);\n}\n\nvoid main() {\n\n\tvec4 def = texture2D( textureDefaultPosition, position.xy );\n\tvec4 pos = texture2D( texturePosition, position.xy );\n\tvec4 infinity = texture2D( textureInfinity, position.xy );\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( pos.rgb, 1.0 );\n\n\tvPos = pos.xyz;\n\tvColorGroup = def.y;\n\tvRatio = position.x;\n\tvInf = pos.a;\n\n    float v = mod(time * 0.02 + infinity.z * 0.1, 1.0);\n\tvInfinity = infinity.a + v;\n    vInfinity -= 1.0 * when_gt(v, 1.0 - infinity.a);\n\t// vInfinity = infinity.z;\n\tvUv = position.xy;\n\n\tfloat basePointSize = 3.;\n\tfloat mixPointSize = mix(basePointSize * 0.5, basePointSize * 1.5, def.a);\n\n    float pointSize = mix(basePointSize, mixPointSize, transition1 - transition7);\n    pointSize = mix(pointSize, basePointSize + (2.0 + infinity.z), (transition6 - transition7) * (1.0 - vInfinity));\n\n\tgl_PointSize = pointSize;\n\n}\n",fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 lightPos;\nuniform vec3 green;\nuniform vec3 yellow;\nuniform vec3 cyan;\nuniform vec3 magenta;\n\nuniform float transition1;\nuniform float transition2;\nuniform float transition3;\nuniform float transition5;\nuniform float transition6;\nuniform float transition7;\n\nuniform float masterAlpha;\nuniform float isHome;\n\nvarying float vColorGroup;\nvarying float vRatio;\nvarying float vInf;\nvarying float vInfinity;\nvarying vec3 vPos;\nvarying vec2 vUv;\n\nvoid main() {\n\tvec2 toCenter = ( gl_PointCoord.xy - 0.5 ) * 2.0;\n\tfloat len = length( toCenter );\n\tif ( len > 0.8 ) discard;\n\n\tfloat groundAlpha = pow(vInf, 2.0);\n\n\tfloat curveAlpha = abs(vInf);\n    curveAlpha = curveAlpha * curveAlpha;\n    curveAlpha = mix(0.1, 0.5, curveAlpha);\n\n\tvec3 color1 = mix( green, magenta, vRatio );\n\n\tif (isHome == 0.0) {\n    \tgl_FragColor = vec4( color1, groundAlpha );\n\t\treturn;\n  \t}\n\n    float stripes = 0.0;\n\n    if(transition1 - transition2 > 0.0) {\n        float inf = fract(vUv.y * 50.);\n        stripes = inf > 0.66 ? 1.0 : inf < 0.33 ? 0.0 : 0.5;\n    }\n\n    float colorTest = transition2 > 0.1 ? vColorGroup : stripes;\n\n\tvec3 color3 = vec3(0.0);\n\tif (colorTest == 0.0) color3 = mix(yellow, green, vRatio);\n\telse if (colorTest == 0.5) color3 = mix(magenta, cyan, vRatio);\n\telse color3 = mix(magenta, yellow, vRatio);\n\n    vec3 color4 = mix(magenta, cyan, vInfinity);\n\n\tvec3 finalColor = mix(color1, color3, transition1);\n\tfinalColor = mix(finalColor, color1, transition5);\n\tfinalColor = mix(finalColor, color4, transition6 - transition7);\n\n\tfloat finalAlpha = mix(0.5, curveAlpha, transition2 - transition3);\n\tfinalAlpha = mix(finalAlpha, groundAlpha, 1.0 - transition1 + transition7);\n\tfinalAlpha = mix(finalAlpha, vInf, transition5 - transition7);\n\tfinalAlpha = mix(finalAlpha, curveAlpha, transition6 - transition7);\n\n\tgl_FragColor = vec4( finalColor, finalAlpha * masterAlpha );\n\n}\n",blending:a.d,depthTest:!1,depthWrite:!1});const t=new Float32Array(3*this.AMOUNT);for(let e=0;e<this.AMOUNT;e++){const i=3*e;t[i+0]=~~(e/this.TEXTURE_HEIGHT)/this.TEXTURE_WIDTH,t[i+1]=e%this.TEXTURE_HEIGHT/this.TEXTURE_HEIGHT}const e=new d.a;e.setAttribute("position",new u.a(t,3)),this.mesh=new m.a(e,this.renderMaterial),this.add(this.mesh)}setupTransitions(t,e){for(let i=0;i<e;i++){const e=this["setupTl"+(i+1)];e&&e(t,i)}}fadeOutIn(t=!1){const e=p.a.timeline();e.to(this.renderMaterial.uniforms.masterAlpha,{value:0,duration:.3},0),t||e.to(this.renderMaterial.uniforms.masterAlpha,{value:1,duration:.3},.4)}initGUI(){const t=v.a.gui.addFolder("grid");["x","y","z"].forEach(e=>{t.add(this.rotation,e,-Math.PI,Math.PI,.01).name("rotation "+e)}),t.add(this.simulationMaterial.uniforms.devTransition,"value",0,1,.01).name("devTransition"),t.add(this.simulationMaterial.uniforms.frequency,"value",0,1,.01).name("frequency"),t.add(this.simulationMaterial.uniforms.amplitude,"value",0,200).name("amplitude"),t.add(this.simulationMaterial.uniforms.curlTimeFrequency,"value",0,.1,.001).name("curlTimeFrequency"),t.add(this.simulationMaterial.uniforms.curlFrequency,"value",0,.001,1e-6).name("curlFrequency"),t.add(this.simulationMaterial.uniforms.curlAmplitude,"value",0,500).name("curlAmplitude"),t.add(this.simulationMaterial.uniforms.curlDistance,"value",0,200).name("curlDistance")}update(t){this.visible&&this.simulationMaterial&&(this.simulationMaterial.uniforms.time.value+=.01,this.fbo.update(t),this.renderMaterial.uniforms.time.value+=.01*t,this.renderMaterial.uniforms.texturePosition.value=this.fbo.rtt.texture)}}},61:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var s=i(48),n=i(81),a=i(54),o=i(38),r=i(7),h=i(37),l=i(6),c=i(13);class d{constructor(t){this.renderer=t,this.scene=new s.a,this.camera=new n.a(-.5,.5,.5,-.5,0,1);const e=new a.a(2,2);this.colors={color1:c.a.colors.darkBlue,color2:c.a.colors.black},this.material=new o.a({uniforms:{gradientScale:{type:"f",value:.03},color1:{type:"c",value:new r.a(this.colors.color1)},color2:{type:"c",value:new r.a(this.colors.color2)}},vertexShader:"precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvUv = uv;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nuniform float gradientScale;\nuniform vec3 color1;\nuniform vec3 color2;\n\nvarying vec2 vUv;\n\nfloat random(vec2 c){\n    return fract(sin(dot(c.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvoid main() {\n\n    float rand = random(vUv);\n    float p = distance(vUv, vec2(0.8, 0.2));\n    p = smoothstep(gradientScale, 1.0, p);\n\n    vec3 color = mix(color2, color1, p + rand * 0.15);\n    // color.rgb += mix(-0.015, 0.015, rand);\n\n    gl_FragColor = vec4(color, 1.0);\n\n}",transparent:!1,fog:!1,lights:!1,depthWrite:!1,depthTest:!1}),this.mesh=new h.a(e,this.material),this.scene.add(this.mesh)}initGUI(){const t=l.a.gui.addFolder("background");t.add(this.material.uniforms.gradientScale,"value",0,1).name("gradient scale"),t.addColor(this.colors,"color1").onChange(()=>{this.material.uniforms.color1.value.set(this.colors.color1)}),t.addColor(this.colors,"color2").onChange(()=>{this.material.uniforms.color2.value.set(this.colors.color2)})}render(){this.renderer.render(this.scene,this.camera)}}},63:function(t,e,i){i(64),i(65),i(66),i(67),i(68),t.exports=i(77)},76:function(t,e,i){},77:function(t,e,i){"use strict";i.r(e);var s=i(33),n=i.n(s),a=(i(76),i(59)),o=i(52),r=i(62),h=i(6),l=i(16),c=i(22),d=i(53);class u extends c.a{constructor(t){super(t),this.webglApp=new d.a({el:t})}destroy(){super.destroy()}}var m=i(12),p=i(5),v=i(2),f=i(8),E=i(21);class g{constructor(t,e){if(this.onMutation=t=>{for(let e of t)"childList"==e.type&&(v.a.dispatch(f.a.SMOOTHSCROLL_MUTATE),this.onResize())},this.onKeyUp=t=>{if("Tab"===t.key){const t=document.activeElement.dataset.focusScroll,e=document.activeElement.getBoundingClientRect().top;if(t){if("0"===t)window.scrollTo(0,0);else if("none"===t)return}else{let t=this.y+e;if(t<this.wh&&this.y<.5*this.wh)return;t>.5*this.wh&&(t-=.5*this.wh),window.scrollTo(0,t)}}},this.onScroll=()=>{this.testDirection(),this.isStopped&&(this.dragging=!0),this.enabled&&(this.ty=window.pageYOffset,this.firstScroll&&(this.y=this.oy=this.ty,this.update(!0),this.firstScroll=!1))},this.onScrollMobile=()=>{this.testDirection(),this.y=window.pageYOffset},this.onMouseWheel=t=>{this.mode&&"touch"!=this.mode||(this.mode="mouse"),this.dragging=!1;const e=t.wheelDelta&&!t.deltaY?-t.wheelDelta:t.deltaY,i=e>0?1:-1;i!==this.direction&&(this.deltaArray=[0,0,0]),this.direction=i,clearTimeout(this.timer),this.timer=setTimeout(()=>{this.deltaArray=[0,0,0],this.isStopped=!0},120),this.isStopped&&(this.isStopped=!1,this.wheelAcceleration&&(this.mode="mouse"),this.wheelAcceleration=!0),this.analyzeArray(e)},this.onTouchStart=()=>{this.dragging=!1,this.mode="touch"},this.onResize=()=>{this.wh=window.innerHeight,this.pageHeight=this.$scrollContainer.clientHeight,this.$body.style.height=Math.ceil(this.pageHeight)+"px",this.update(!0)},this.onResizeMobile=()=>{this.pageHeight=this.$scrollContainer.clientHeight},this.onRouterBeforeEnter=t=>{const{data:e}=t;this.enabled="home"!==e},this.tick=()=>{this.update()},this.update=t=>{this.enabled&&(t||!this.dragging&&("touch"===this.mode||"trackpad"===this.mode)?(this.y=this.ty,this.vy=0):(this.y=Object(E.b)(this.y,this.ty,this.easing),this.vy=this.ty-this.y),!this.pointerDisabled&&Math.abs(this.vy)>10?(this.pointerDisabled=!0,this.$scrollContainer.style.pointerEvents="none"):this.pointerDisabled&&Math.abs(this.vy)<=10&&(this.pointerDisabled=!1,this.$scrollContainer.style.pointerEvents=""),this.percent=this.y/(this.height-this.wh),this.updateDom())},g.instance)throw new Error("Error: Use smoothscroll.instance instead of new.");g.instance=this,this.IS_MOBILE=t,this.DEVICE_TYPE=n.a.deviceType,this.IS_TOUCH_ONLY="touchOnly"===this.DEVICE_TYPE,this.NATIVE_SCROLL=this.IS_MOBILE||this.IS_TOUCH_ONLY,this.$body=document.body,this.$scrollContainer=this.$body.querySelector(".js-scroll-container"),this.y=this.ty=0,this.vy=0,this.percent=0,this.scrollDirection=0,this.enabled=!0,this.firstScroll=!0;const i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;this.easing=i?.35:.1,this.deltaArray=[0,0,0],this.direction=1,this.isStopped=!0,this.enabled="home"!==e}get instance(){return g.instance}start(){if(this.NATIVE_SCROLL){const t=!!n.a.passiveEvents&&{passive:!0};window.addEventListener("scroll",this.onScrollMobile,t),v.a.addListener(p.a.RESIZE_CHANGE,this.onResizeMobile),this.onResizeMobile()}else this.addListeners(),this.timeout=setTimeout(()=>{this.onResize(),this.update(),v.a.addListener(f.a.ROUTER_BEFORE_ENTER,this.onRouterBeforeEnter),v.a.addListener(p.a.RAF_UPDATE,this.tick),clearTimeout(this.timeout)},100)}addListeners(){const t=!!n.a.passiveEvents&&{passive:!0};this.wheelEvent="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",window.addEventListener("keyup",this.onKeyUp,t),window.addEventListener("scroll",this.onScroll,t),this.$scrollContainer.addEventListener(this.wheelEvent,this.onMouseWheel,t),this.$scrollContainer.addEventListener("touchstart",this.onTouchStart,t),v.a.addListener(p.a.RESIZE_CHANGE,this.onResize);this.observer=new MutationObserver(this.onMutation),this.observer.observe(this.$scrollContainer,{childList:!0,subtree:!0})}scrollTo(t){this.ty=t,this.update(!0),window.scrollTo(0,t)}analyzeArray(t){const e=Math.abs(this.deltaArray[0]),i=Math.abs(this.deltaArray[1]),s=Math.abs(this.deltaArray[2]),n=Math.abs(t);n>s&&s>i&&i>e?this.wheelAcceleration=!0:n<s&&s<=i&&(this.wheelAcceleration=!1,this.mode="trackpad"),this.deltaArray.shift(),this.deltaArray.push(t)}testDirection(){const t=window.pageYOffset>this.y?1:-1;this.scrollDirection!==t&&this.y<this.pageHeight-1.1*window.innerHeight&&(this.scrollDirection=t,this.$body.dataset.scrollDirection=1===this.scrollDirection?"down":"up")}updateDom(){const t=(100*(this.y+.01)|0)/100;t!==this.oy&&(this.$scrollContainer.style.transform=this.$scrollContainer.style.webkitTransform=`translate3d(0,${-t}px,0)`),this.oy=this.y}dispose(){this.NATIVE_SCROLL?(window.removeEventListener("scroll",this.onScrollMobile),v.a.removeListener(p.a.RESIZE_CHANGE,this.onResizeMobile)):(v.a.removeListener(p.a.RAF_UPDATE,this.tick),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("keyup",this.onKeyUp),this.$scrollContainer.removeEventListener(this.wheelEvent,this.onMouseWheel),this.$scrollContainer.removeEventListener("touchstart",this.onTouchStart),v.a.removeListener(p.a.RESIZE_CHANGE,this.onResize),v.a.removeListener(f.a.ROUTER_BEFORE_ENTER,this.onRouterBeforeEnter)),this.observer.disconnect(),this.observer=null}}g.instance=void 0;var T=g;class y extends c.a{constructor(t,e){super(t),this.onBurgerClick=t=>{t.preventDefault(),this.MENU_OPEN?this.closeMenu():this.openMenu()},this.onResize=()=>{this.isSmallDevice=window.innerWidth<=1024,this.elWidth=this.el.offsetWidth,this.elHeight=this.el.offsetHeight,this.cWidth=this.elWidth*window.devicePixelRatio,this.cHeight=this.elHeight*window.devicePixelRatio,this.context&&(this.$canvas.width=this.cWidth,this.$canvas.height=this.cHeight);const t=this.$footer.getBoundingClientRect();this.footerTop=T.instance.y+t.top},this.onRouterBeforeEnter=t=>{const{data:e}=t;this.STOP_RAF="home"===e},this.onRouterAfterLeave=()=>{if(this.isSmallDevice)this.MENU_OPEN&&this.closeMenu();else if(this.scrollShift<0)return;const t={value:this.scrollShift};m.a.to(t,{value:0,onUpdate:()=>{this.el.style.transform=`translate3d(0, -${t.value.toFixed(2)}px, 0)`,this.el.style.webkitTransform=`translate3d(0, -${t.value.toFixed(2)}px, 0)`}}),this.$appCanvas.parentElement.style.opacity=1,this.$headerCanvas.style.opacity=1,requestAnimationFrame(()=>{const t=this.$footer.getBoundingClientRect();this.footerTop=T.instance.y+t.top})},this.update=()=>{this.context&&this.isSmallDevice&&this.drawBg(),this.STOP_RAF||(this.scrollDelta=window.innerHeight+T.instance.y-this.footerTop,this.scrollShift=this.scrollDelta<0?0:this.scrollDelta,this.opacity=Math.max(0,1-this.scrollShift/window.innerHeight).toFixed(2),this.$appCanvas.parentElement.style.opacity=this.opacity,this.$headerCanvas.style.opacity=this.opacity,this.isSmallDevice||(this.el.style.transform=`translate3d(0, -${this.scrollShift}px, 0)`,this.el.style.webkitTransform=`translate3d(0, -${this.scrollShift}px, 0)`))},this.destroy=()=>{super.destroy()},this.$canvas=this.el.querySelector(".js-header-canvas"),this.$burger=this.el.querySelector(".js-header-burger"),this.$nav=this.el.querySelector(".js-header-nav"),this.$navList=this.el.querySelector(".js-header-nav-list"),this.$details=this.el.querySelector(".js-header-details"),this.$lang=this.el.querySelector(".js-header-lang"),this.$appCanvas=document.querySelector(".js-canvas canvas"),this.$headerCanvas=document.querySelector(".js-header-canvas"),this.$footer=document.querySelector(".js-footer"),this.CURRENT_NAMESPACE=h.a.namespace,this.initActiveNamespace(this.CURRENT_NAMESPACE),this.scrollDelta=-1,this.scrollShift=0,this.MENU_OPEN=!1,this.STOP_RAF="home"===this.CURRENT_NAMESPACE,h.a.webgl&&this.initCanvas(),this.addListeners()}initCanvas(){this.context=this.$canvas.getContext("2d")}addListeners(){v.a.addListener(f.a.ROUTER_BEFORE_ENTER,this.onRouterBeforeEnter),v.a.addListener(f.a.ROUTER_AFTER_LEAVE,this.onRouterAfterLeave),v.a.addListener(f.a.SMOOTHSCROLL_MUTATE,this.onResize),v.a.addListener(p.a.RESIZE_CHANGE,this.onResize),v.a.addListener(p.a.RAF_UPDATE,this.update),this.$burger.addEventListener("click",this.onBurgerClick)}initActiveNamespace(){"404"!==this.CURRENT_NAMESPACE?(this.activeItem=document.querySelector(`.js-nav-item[data-namespace=${this.CURRENT_NAMESPACE}]`),this.activeItem&&this.activeItem.classList.add("is-active")):this.activeItem=null}setActiveNamespace(t){if(null!==this.activeItem&&this.activeItem.classList.remove("is-active"),"home"!==t){const e=document.querySelector(`.js-nav-item[data-namespace=${t}]`);e&&e.classList.add("is-active"),this.activeItem=e}this.CURRENT_NAMESPACE=t}openMenu(){v.a.dispatch(f.a.HEADER_MENU_OPEN),this.$burger.classList.add("is-active"),this.$nav.classList.add("is-active"),T.instance.$body.classList.add("is-scroll-locked"),this.MENU_OPEN=!0,l.a.event({eventCategory:"menu",eventAction:"clicInteract",eventLabel:"ouvrirMenuMobile"})}closeMenu(){v.a.dispatch(f.a.HEADER_MENU_CLOSE),this.$burger.classList.remove("is-active"),this.$nav.classList.remove("is-active"),T.instance.$body.classList.remove("is-scroll-locked"),this.MENU_OPEN=!1,l.a.event({eventCategory:"menu",eventAction:"clicInteract",eventLabel:"fermerMenuMobile"})}updateDetails(t){this.$details.innerHTML=t.innerHTML,this.$navList.classList.add("is-inactive"),this.$details.classList.add("is-active")}clearDetails(){this.$navList.classList.remove("is-inactive"),this.$details.classList.remove("is-active"),this.$details.innerHTML=""}updateLangUrl(t){this.$lang.href=t}drawBg(){this.context.clearRect(0,0,this.cWidth,this.cHeight),this.context.fillStyle="red",this.context.drawImage(this.$appCanvas,0,0,this.elWidth,this.elHeight,0,0,this.cWidth,this.cHeight)}}var x=i(43),w=i.n(x),R={name:"fade",leave({current:t,next:e}){const i=this.async();m.a.to(t.container,{opacity:0,duration:.3,ease:"power2.out",onComplete:i})},beforeEnter({next:t}){m.a.set(t.container,{opacity:0})},enter({next:t}){m.a.to(t.container,{opacity:1,duration:.3,ease:"power2.in"})}},S={name:"fromHome",from:{namespace:"home"},leave({current:t,next:e}){const i=this.async();m.a.to(t.container,{opacity:0,duration:.3,ease:"power2.out",onComplete:i})},beforeEnter({next:t}){m.a.set(t.container,{opacity:0})},enter({next:t}){m.a.to(t.container,{opacity:1,duration:.3,ease:"power2.in"})}},b={name:"fromContent",from:{namespace:["blogSingle","caseStudySingle","serviceSingle","privacy"]},leave({current:t,next:e}){const i=this.async();m.a.to(t.container,{xPercent:100,duration:.3,ease:"power2.out",onComplete:i})},beforeEnter({next:t}){m.a.set(t.container,{opacity:0})},enter({next:t}){m.a.to(t.container,{opacity:1,duration:.3,ease:"power2.in"})}},I={name:"toContent",to:{namespace:["blogSingle","caseStudySingle","serviceSingle","privacy"]},leave({current:t,next:e}){this.async()()},beforeEnter({next:t}){m.a.set(t.container,{xPercent:100})},enter({next:t}){m.a.to(t.container,{xPercent:0,duration:.3,ease:"power2.inout"})}};var _=new class{constructor(){this.before=t=>{const{current:e}=t;window.lastNamespace=e.namespace,v.a.dispatch(f.a.ROUTER_BEFORE,e.namespace)},this.beforeLeave=t=>{const{current:e}=t;v.a.dispatch(f.a.ROUTER_BEFORE_LEAVE,e.namespace),this.app.destroy()},this.leave=t=>{const{current:e}=t;v.a.dispatch(f.a.ROUTER_LEAVE,e.namespace),this.app.cleanDom(e)},this.afterLeave=t=>{const{current:e}=t;v.a.dispatch(f.a.ROUTER_AFTER_LEAVE,e.namespace),T.instance.scrollTo(0)},this.beforeEnter=t=>{const{next:e}=t;this.app.prepareDom(e),v.a.dispatch(f.a.ROUTER_BEFORE_ENTER,e.namespace),document.body.dataset.page=e.namespace},this.enter=t=>{const{next:e}=t;v.a.dispatch(f.a.ROUTER_ENTER,e.namespace),this.app.header.setActiveNamespace(e.namespace)},this.afterEnter=t=>{const{next:e}=t;this.app.initDom(e),v.a.dispatch(f.a.ROUTER_AFTER_ENTER,e.namespace)},this.after=t=>{const{next:e}=t;v.a.dispatch(f.a.ROUTER_AFTER,e.namespace),this.app.domReady(e)}}start(t){this.app=t;["before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"].forEach(t=>{w.a.hooks[t](this[t])});const e=[R,S,b,I];w.a.init({transitions:e,debug:!0})}},C=i(28);const L="down",A="up";class $ extends C.a{constructor({threshold:t=1e3,keyboard:e=!0}){if($.instance)throw new Error("Error: Use wheel.instance instead of new.");super(),this.onWheel=t=>{const e=(new Date).getTime(),i=t.wheelDelta||-t.deltaY||-t.detail,s=Math.max(-1,Math.min(1,i)),n=void 0!==t.wheelDeltaX||void 0!==t.deltaX,a=Math.abs(t.wheelDeltaX)<Math.abs(t.wheelDelta)||Math.abs(t.deltaX)<Math.abs(t.deltaY)||!n;this.scrollings.length>149&&this.scrollings.shift(),this.scrollings.push(Math.abs(i));const o=e-this.prevTime;this.prevTime=e,o>200&&(this.scrollings=[]);const r=this.getAverage(10)>=this.getAverage(70);return this.CAN_SCROLL&&r&&a&&(s<0?this.scrolling(L):this.scrolling(A)),!1},this.onKeyDown=t=>{!this.CAN_SCROLL||"ArrowDown"!==t.key&&"ArrowUp"!==t.key||("ArrowDown"===t.key?this.scrolling(L):this.scrolling(A))},$.instance=this,this.KEYBOARD_SUPPORT=e,this.THRESHOLD=t,this.scrollings=[],this.CAN_SCROLL=!0}get instance(){return $.instance}start(){this.prevTime=(new Date).getTime()}addListener(t,e){super.addListener(t,e),window.addEventListener("wheel",this.onWheel,!1),this.KEYBOARD_SUPPORT&&document.addEventListener("keydown",this.onKeyDown)}removeListener(t,e){super.removeListener(t,e),window.removeEventListener("wheel",this.onWheel,!1),this.KEYBOARD_SUPPORT&&document.removeEventListener("keydown",this.onKeyDown)}scrolling(t){this.CAN_SCROLL=!1,this.timeout=setTimeout(()=>{this.CAN_SCROLL=!0,clearTimeout(this.timeout)},this.THRESHOLD),this.dispatch("scroll",{dir:t})}getAverage(t){const e=this.scrollings.slice(Math.max(this.scrollings.length-t,1));let i=0;for(let t=0;t<e.length;t++)i+=e[t];e.reduce((t,e)=>t+e,0);return Math.ceil(i/t)}}$.instance=void 0;var N=$;class M extends a.a{constructor(t,e){const i=new T(t.mobile,t.namespace),s=new N({threshold:2100});i.start(),s.start(),super(t,e),this.onTrackingLinkClick=this.onTrackingLinkClick.bind(this),this.initAppComponents(),this.initRouter(),this.initAppTracking(),setTimeout(()=>{this.initTracking()},300),this.otherLang="fr"===h.a.lang?"en":"fr",o.a.start(),r.a.start()}initGTM(){}initAppComponents(){const t=document.querySelector(".js-header"),e=document.querySelector(".js-canvas");this.canvas=new u(e),this.header=new y(t)}initRouter(){_.start(this)}initAppTracking(){if("404"===h.a.namespace){const t=document.referrer.replace(window.location.origin,"");l.a.event({eventCategory:"page404",eventAction:"404-sur-"+window.location.pathname,eventLabel:"404-de-: "+t})}}initTracking(){this.$trackingLinks=[...document.querySelectorAll(".js-tracking")],this.$trackingLinks.forEach(t=>{t.addEventListener("click",this.onTrackingLinkClick)})}clearTracking(){for(let t=0;t<this.$trackingLinks.length;t++)this.$trackingLinks[t].removeEventListener("click",this.onTrackingLinkClick),this.$trackingLinks[t]=null;this.$trackingLinks=null}prepareDom(t){[...t.container.querySelectorAll(".o-wysiwyg a, .o-content-blocks a, .about__advantages-item a")].forEach(t=>{t.innerHTML=`<span>${t.innerHTML}</span>`})}initDom(t){const e=t.container.getAttribute(`data-${this.otherLang}-url`);this.header.updateLangUrl(e),"blogSingle"===t.namespace|"caseStudySingle"===t.namespace|"serviceSingle"===t.namespace&&this.updateHeader(t.container)}domReady(t){this.initComponents(),setTimeout(()=>{this.initTracking()},300)}onTrackingLinkClick(t){l.a.event(l.a.parseTrackerString(t.target.dataset.tracking))}updateHeader(t){const e=t.querySelector(".js-details");this.header.updateDetails(e)}cleanDom(t){"blogSingle"===t.namespace|"caseStudySingle"===t.namespace|"serviceSingle"===t.namespace&&this.header.clearDetails(),this.clearTracking()}destroy(){super.destroy()}}class P{constructor(t,e={}){if(!t)return;this.update=this.update.bind(this),this.onResize=this.onResize.bind(this),this.destroy=this.destroy.bind(this);this.$view=t,this.id=this.$view.dataset.componentId,this.options={root:null,intersectionRatio:0,rootMargin:"0px",threshold:0,...e},this.options.intersectionRatio&&"number"==typeof this.options.intersectionRatio||(this.options.intersectionRatio=0),this.visibility=!1,this.visible=!1,this.watcher=new IntersectionObserver(this.update,this.options),this.watcher.observe(this.$view),v.a.addListener(p.a.RESIZE_CHANGE,this.onResize)}update(t){this.visibility=t[0].intersectionRatio>this.options.intersectionRatio}onResize(){this.locate()}locate(){this.viewBounds=this.$view.getBoundingClientRect(),this.offsetTop=T.instance.y+this.viewBounds.top,this.offsetBottom=this.offsetTop+this.viewBounds.height}destroy(){v.a.removeListener(p.a.RESIZE_CHANGE,this.onResize),this.watcher.unobserve(this.$view),this.watcher.disconnect(),this.watcher=null,this.$view=null,this.visibility=!1}}class U extends P{constructor(t,e={}){super(t,e)}update(t){super.update(t),this.visibility&&!this.visible?this.display():!this.visibility&&this.visible&&this.hide()}display(){this.visible=!0,this.$view.classList.add("is-active")}hide(){this.visible=!1,this.$view.classList.remove("is-active")}}var D=i(31),O=i.n(D);var k=i(13);class H{constructor({x:t,y:e,color:i,initAngle:s,radiusScale:n}){this.x=t,this.y=e,this.vx=3*Math.random()-1,this.vy=3*Math.random()-1,this.sign=Math.random()>.5?1:-1,this.speed=Object(E.c)(1e-4,3e-4,!1),this.radius=2,this.initAngle=s,this.radiusScale=n,this.color=i}checkPoint(t,e,i,s,n){return(t-i)*(t-i)+(e-s)*(e-s)<(n*=n)}render(t){t.globalAlpha=.3,t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fill()}update(t,e,i,s,n,a){this.x=n.x+Math.cos((this.initAngle+s*this.speed)*this.sign)*this.radiusScale*a,this.y=n.y+Math.sin((this.initAngle+s*this.speed)*this.sign)*this.radiusScale*a,this.render(t)}}class z{constructor(t,e,i){this.context=t,this.size=e,this.nodes=[],this.length=80,this.maxDistance=200,this.fontSize=20,this.center={x:.5*this.size.w,y:.5*this.size.h},this.colors=[k.a.colors.yellow,k.a.colors.cyan,k.a.colors.magenta];for(let t,e,i,s=0;s<this.length;s++)e=Math.random()*Math.PI*2,t=Object(E.c)(0,2),i=Object(E.c)(.3,1,!1),this.nodes.push(new H({x:this.center.x+Math.cos(e)*i*this.radius,y:this.center.y+Math.sin(e)*i*this.radius,initAngle:e,radiusScale:i,color:this.colors[t]}));this.anchors=[{left:.2,top:.2,dir:1,amp:2,smooth:.1},{left:.8,top:.12,dir:-1,amp:2,smooth:.2},{left:.55,top:.3,dir:1,amp:4,smooth:.2},{left:.3,top:.7,dir:-1,amp:2,smooth:.15},{left:.7,top:.85,dir:1,amp:1.5,smooth:.25},{left:.85,top:.6,dir:-1,amp:1.5,smooth:.2}],this.target={left:.55,top:.5},this.anchors.forEach((t,e)=>{t.text=i[e],t.x=this.size.w*t.left,t.y=this.size.h*t.top,this.nodes.push({initX:t.x,initY:t.y})}),this.noise={x:0,y:0},this.resize(this.size)}getDistance(t,e){const i=e.x-t.x,s=e.y-t.y;return{dx:i,dy:s,distance:Math.sqrt(i*i+s*s)}}drawAnchors(){this.context.globalAlpha=1,this.anchors.forEach((t,e)=>{t.x=Object(E.b)(t.initX,t.tX,Math.abs(this.noise.x)),t.y=Object(E.b)(t.initY,t.tY,Math.abs(this.noise.y)),this.context.beginPath(),this.context.rect(t.x,t.y-5,10,10),this.context.fillStyle="#92e821",this.context.fill(),this.context.fillStyle="#ffffff",this.context.font=this.fontSize+"px Fracktif",this.context.textAlign="center",this.context.fillText(t.text,t.x+5,t.y-20),this.nodes[this.nodes.length-this.anchors.length+e].x=t.x,this.nodes[this.nodes.length-this.anchors.length+e].y=t.y})}drawNodes(t){this.context.globalAlpha=1;const e=Object(E.b)(1.2*this.radius,this.radius,Math.abs(this.noise.x));for(let i=0;i<this.length;i++)this.nodes[i].update(this.context,this.size.w,this.size.h,t,this.center,e);for(let t,e=0;e<this.length-1+this.anchors.length;e++){t=this.nodes[e];for(let i,s,n=e+1;n<this.length+this.anchors.length;n++)i=this.nodes[n],s=this.getDistance(t,i).distance,s<this.maxDistance&&(this.context.lineWidth=1,this.context.globalAlpha=.75*(1-s/this.maxDistance),this.context.strokeStyle=t.color?t.color:i.color,this.context.beginPath(),this.context.moveTo(t.x,t.y),this.context.lineTo(i.x,i.y),this.context.stroke())}}update(t){this.noise.x=Math.cos(6e-4*t),this.noise.y=Math.sin(5e-4*t),this.drawNodes(t),this.drawAnchors(t)}resizeAnchors(){this.anchors.forEach(t=>{t.initX=this.size.w*t.left,t.initY=this.size.h*t.top;const{dx:e,dy:i,distance:s}=this.getDistance(t,this.target);t.tX=t.x+e*this.targetScale,t.tY=t.y+i*this.targetScale})}resize({w:t,h:e}){this.size.w=t,this.size.h=e,this.radius=.4*this.size.h,this.target.x=this.size.w*this.target.left,this.target.y=this.size.h*this.target.top,this.center.x=.5*this.size.w,this.center.y=.5*this.size.h,window.innerWidth<=1024?(this.fontSize=14,this.targetScale=.5,this.maxDistance=window.innerWidth<=500?80:200):(this.fontSize=20,this.targetScale=.5,this.maxDistance=200),this.resizeAnchors()}destroy(){this.anchors=null,this.nodes=null}}var F=class{constructor(t,e=0,i=!0){this.index=e,this.prevIndex=0,this.nextIndex=0,this.total=t,this.loop=i,this.prevNext()}inc(){if(this.index+=1,this.index>this.total-1){if(!this.loop)return this.index-=1,!1;this.index=0}this.prevNext()}dec(){if(this.index-=1,this.index<0){if(!this.loop)return this.index+=1,!1;this.index=this.total-1}this.prevNext()}prevNext(){this.prevIndex=this.index-1,this.nextIndex=this.index+1,this.prevIndex<0&&(this.prevIndex=this.total-1),this.nextIndex>this.total-1&&(this.nextIndex=0)}set(t=0){t<0&&(t=0),t>this.total-1&&(t=this.total-1),this.index=t,this.prevNext()}},G=i(46),B=i.n(G);const j="down",q="up";class X extends C.a{constructor(){super(),this.onPanUp=t=>{this.CAN_PAN&&this.panning(j)},this.onPanDown=t=>{this.CAN_PAN&&this.panning(q)},this.THRESHOLD=2100,this.CAN_PAN=!0,this.hammer=new B.a.Manager(document.body),this.hammer.add(new B.a.Pan({direction:B.a.DIRECTION_VERTICAL,threshold:100}))}addListener(t,e){super.addListener(t,e),this.hammer.on("panup",this.onPanUp),this.hammer.on("pandown",this.onPanDown)}removeListener(t,e){super.removeListener(t,e),this.hammer.off("panup",this.onPanUp),this.hammer.off("pandown",this.onPanDown)}panning(t){this.CAN_PAN=!1,this.timeout=setTimeout(()=>{this.CAN_PAN=!0,clearTimeout(this.timeout)},this.THRESHOLD),this.dispatch("pan",{dir:t})}destroy(){clearTimeout(this.timeout),this.hammer.destroy(),document.body.style=""}}var W=X;class Y extends c.a{constructor(t){super(t),this.onWheel=t=>{"down"===t.data.dir?this.counter.inc():this.counter.dec(),this.updateSection()},this.onResize=()=>{this.isDesktopNav=window.innerWidth>1024,this.$inner.style.transform=`translate3d(0, -${100*this.counter.index}%, 0)`,this.$inner.style.webkitTransform=`translate3d(0, -${100*this.counter.index}%, 0)`},this.onNavItemClick=t=>{t.preventDefault();const e=+t.target.dataset.index;this.IS_NAVIGATING||e===this.CURRENT_SECTION||(this.IS_NAVIGATING=!0,this.counter.set(e),this.updateSection(),this.navTimeout&&clearTimeout(this.navTimeout),this.navTimeout=setTimeout(()=>{this.IS_NAVIGATING=!1},2100),l.a.event({eventCategory:"accueil",eventAction:"clicInteract",eventLabel:"scroll-"+e}))},this.$appCanvas=document.querySelector(".js-canvas"),this.$inner=this.el.querySelector(".js-scroll-inner"),this.$sections=[...this.el.querySelectorAll(".js-scroll-section")],this.$nav=this.el.querySelector(".js-scroll-nav"),this.$navIndicator=this.$nav.querySelector(".js-scroll-nav-indicator"),this.$navItems=[...this.$nav.querySelectorAll(".js-scroll-nav-item")],this.$header=document.querySelector(".js-header"),this.$footer=document.querySelector(".js-footer"),this.$scrollContainer=document.querySelector(".js-scroll-container"),this.$progress=document.createElement("div"),this.$progress.classList="c-home-scroller-progress js-scroll-progress",this.$progressInner=document.createElement("div"),this.$progressInner.classList="c-home-scroller-progress__inner js-scroll-progress-inner",this.$progress.appendChild(this.$progressInner),T.instance.$body.appendChild(this.$progress),this.hammer=new W,this.IS_NAVIGATING=!1,this.CURRENT_SECTION=0,this.COUNT=this.$sections.length+1,this.SECTIONS_COUNT=this.$sections.length-1,this.counter=new F(this.COUNT,0,!1),this.setupSections(),this.onResize(),this.addListeners()}setupSections(){const t=[...this.$sections];t.shift(),t.shift(),t.pop(),t.forEach(t=>{const e=new O.a({target:t.querySelector(".js-section-title"),by:"words",whitespace:!1}),i=new O.a({target:t.querySelector(".js-section-text"),by:"words",whitespace:!1}),s=new O.a({target:t.querySelector(".js-section-subtext"),by:"words",whitespace:!1});[...e[0].words,...i[0].words,...s[0].words].forEach(t=>{t.innerHTML=`<span aria-hidden="true">${t.innerHTML}</span>`})})}addListeners(){N.instance.addListener("scroll",this.onWheel),this.hammer.addListener("pan",this.onWheel),v.a.addListener(p.a.RESIZE_CHANGE,this.onResize),this.$navItems.forEach(t=>{t.addEventListener("click",this.onNavItemClick)})}removeListeners(){N.instance.removeListener("scroll",this.onWheel),this.hammer.removeListener("pan",this.onWheel),v.a.removeListener(p.a.RESIZE_CHANGE,this.onResize),this.$navItems.forEach(t=>{t.removeEventListener("click",this.onNavItemClick)})}updateSection(){const t=this.counter.index;if(t===this.CURRENT_SECTION)return;this.$inner.style.transform=`translate3d(0, -${100*t}%, 0)`,this.$inner.style.webkitTransform=`translate3d(0, -${100*t}%, 0)`,v.a.dispatch(f.a.HOME_SCROLLER_CHANGE_SECTION,t),0===this.CURRENT_SECTION&&this.$sections[0].classList.remove("is-anim-in"),this.CURRENT_SECTION>0&&this.CURRENT_SECTION<=this.SECTIONS_COUNT&&(0===t&&this.$sections[0].classList.add("is-anim-in"),this.CURRENT_SECTION===this.SECTIONS_COUNT||this.$navItems[this.CURRENT_SECTION-1].classList.remove("is-active"),this.$sections[this.CURRENT_SECTION].classList.remove("is-active")),this.CURRENT_SECTION===this.COUNT-1&&(this.isDesktopNav&&(this.$header.style.transform="translate3d(0, 0, 0)",this.$header.style.webkitTransform="translate3d(0, 0, 0)",this.$header.classList.remove("is-inactive")),this.$footer.classList.remove("is-active"),this.$progress.style.transform="translate3d(0, 0, 0)",this.$progress.style.webkitTransform="translate3d(0, 0, 0)",this.$scrollContainer.style.transform="translate3d(0, 0, 0)",this.$scrollContainer.style.webkitTransform="translate3d(0, 0, 0)",this.$appCanvas.style.opacity=1),t===this.COUNT-1?(this.isDesktopNav&&(this.$header.classList.add("is-inactive"),this.$header.style.transform="translate3d(0, -100%, 0)",this.$header.style.webkitTransform="translate3d(0, -100%, 0)"),this.$footer.classList.add("is-active"),this.$progress.style.transform="translate3d(0, -100%, 0)",this.$progress.style.webkitTransform="translate3d(0, -100%, 0)",this.$scrollContainer.style.transform="translate3d(0, -50%, 0)",this.$scrollContainer.style.webkitTransform="translate3d(0, -50%, 0)",this.$appCanvas.style.opacity=0):t===this.SECTIONS_COUNT?(this.$sections[t].classList.add("is-active"),this.$nav.classList.contains("is-active")&&this.$nav.classList.remove("is-active")):t>0?(this.$nav.classList.contains("is-active")||this.$nav.classList.add("is-active"),this.$sections[t].classList.add("is-active"),this.$navItems[t-1].classList.add("is-active"),this.$navIndicator.style.transform=`translate3d(0, ${100*(t-1)}%, 0)`,this.$navIndicator.style.webkitTransform=`translate3d(0, ${100*(t-1)}%, 0)`):this.$nav.classList.remove("is-active"),this.CURRENT_SECTION=t;let e=this.CURRENT_SECTION/(this.SECTIONS_COUNT-1);e=Math.min(1,e),this.$progressInner.style.transform=`scale3d(1, ${e.toFixed(2)},1)`}destroy(){super.destroy(),this.removeListeners(),this.hammer.destroy(),this.$header.classList.contains("is-inactive")&&this.$header.classList.remove("is-inactive"),this.$footer.classList.contains("is-active")&&this.$footer.classList.remove("is-active"),this.$scrollContainer.style.transform="translate3d(0, 0, 0)",this.$scrollContainer.style.webkitTransform="translate3d(0, 0, 0)",this.$appCanvas.style.opacity=1,this.$sections=[...this.el.querySelectorAll(".js-scroll-section")];for(let t=0;t<this.$sections.length;t++)this.$sections[t]=null;this.$sections=null;for(let t=0;t<this.$navItems.length;t++)this.$navItems[t]=null;this.$navItems=null,T.instance.$body.removeChild(this.$progress),this.$progress=this.$progressInner=null,this.$inner=null,this.$nav=null,this.$navIndicator=null,this.$header=null,this.$footer=null,this.$scrollContainer=null}}class V extends c.a{constructor(t){super(t),this.onFormSubmit=this.onFormSubmit.bind(this);const e=this.el.dataset.componentId,i={portalId:"56427",formId:"fr"===h.a.lang?"a1f67af7-c611-4e70-a651-1e0ac1db8011":"e84337f8-f17e-4d56-b9b0-4357080251db",formInstanceId:e,target:`[data-component-id="${e}"]`};hbspt.forms.create({...i})}onFormSubmit(t){this.timeout=setTimeout(()=>{if("hsFormCallback"===t.data.type&&"onFormSubmit"===t.data.eventName){if(this.el.querySelector("form"))return;window.removeEventListener("message",this.onFormSubmit),l.a.event({eventCategory:this.el.dataset.eventCategory,eventAction:"clicContact",eventLabel:"succesInfolettre"})}},500)}destroy(){super.destroy()}}var K={en:["January","February","March","April","May","June","July","August","September","October","November","December"],fr:["Janvier","Fevrier","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","Decembre"]};class Z extends c.a{constructor(t){super(t),this.onToggleClick=t=>{t.preventDefault(),this.IS_FETCHING||(this.IS_OPEN?this.close():this.open())},this.onMoreClick=t=>{t.preventDefault(),this.IS_FETCHING||(this.CURRENT_PAGE++,this.fetchItems(),l.a.event({eventCategory:this.eventCategory,eventAction:"clicInteract",eventLabel:"voirPlus"}))},this.onFilterClick=t=>{t.preventDefault();const e=t.target.dataset.id,i=t.target.dataset.slug;let s;""===e|this.CURRENT_FILTER===e?(this.lastFilter.classList.remove("is-active"),""===e&&this.$allBtn.classList.add("is-active"),this.CURRENT_FILTER="",this.FILTERED=!1,this.CURRENT_PAGE=1,s=this.MAX_PAGE):(this.lastFilter&&this.lastFilter.classList.remove("is-active"),t.target.classList.add("is-active"),s=this.MAX_CAT_PAGE["filter"+e]>1,this.CURRENT_PAGE=1,this.CURRENT_FILTER=e,this.FILTERED=!0),this.$moreBlock.classList.contains("is-inactive")&&this.MAX_PAGE>1&&this.$moreBlock.classList.remove("is-inactive"),this.lastFilter=t.target;const n=""===this.CURRENT_FILTER?this.BASE_URL:`${this.BASE_URL}/${i}`;window.history.pushState({},null,n),window.lastFilteredUrl=window.location.href,l.a.event({eventCategory:this.eventCategory,eventAction:"clicInteract",eventLabel:"filtre-"+this.lastFilter.firstChild.filterLabel}),this.close(),this.fetchItems(!0)},this.onKeyDown=this.onKeyDown.bind(this),this.onTrackingLinkClick=this.onTrackingLinkClick.bind(this),this.$toggleBtn=this.el.querySelector(".js-filters-toggle"),this.$panel=this.el.querySelector(".js-filters-panel"),this.$moreBlock=this.el.querySelector(".js-filters-more"),this.$moreBtn=this.$moreBlock.querySelector(".js-filters-more-btn"),this.$filtersBtn=[...this.el.querySelectorAll(".js-filters-btn")],this.$allBtn=this.$filtersBtn[0],this.$list=this.el.querySelector(".js-filters-list"),this.$spacer=this.el.querySelector(".js-filters-spacer"),this.$focusableEls=[...this.$filtersBtn,this.$toggleBtn],this.$firstFocusableEl=this.$focusableEls[0],this.$lastFocusableEl=this.$focusableEls[this.$focusableEls.length-1],this.TYPE=this.el.dataset.type,this.IS_OPEN=!1,this.IS_FETCHING=!1,this.CURRENT_FILTER=this.el.dataset.activeFilter,this.CURRENT_PAGE=1;const e=window.location.pathname.split("/");"fr"===h.a.lang?this.BASE_URL="/"+e[1]:this.BASE_URL=`/${e[1]}/${e[2]}`,this.CURRENT_FILTER?window.lastFilteredUrl=window.location.href:window.lastFilteredUrl=void 0,"blog"===this.TYPE?(this.ITEMS_PER_PAGE=blogItemsPerPage,this.MAX_PAGE=blogItemsMaxPage,this.MAX_CAT_PAGE=blogItemsMaxCatPage):(this.ITEMS_PER_PAGE=csItemsPerPage,this.MAX_PAGE=csItemsMaxPage,this.MAX_CAT_PAGE=csItemsMaxCatPage),this.eventCategory="case-studies"===this.TYPE?"casAffairesAcceuil":"blogueAcceuil",this.lastFilter=""===this.CURRENT_FILTER?this.$allBtn:this.el.querySelector(".js-filters-btn.is-active"),this.addListeners(),this.initTracking()}addListeners(){this.$toggleBtn.addEventListener("click",this.onToggleClick),this.$moreBtn.addEventListener("click",this.onMoreClick);for(let t=0;t<this.$filtersBtn.length;t++)this.$filtersBtn[t].addEventListener("click",this.onFilterClick)}initTracking(){this.$trackingLinks=[...this.$list.querySelectorAll(".js-list-tracking")],this.$trackingLinks.forEach(t=>{t.addEventListener("click",this.onTrackingLinkClick)})}clearTracking(){for(let t=0;t<this.$trackingLinks.length;t++)this.$trackingLinks[t].removeEventListener("click",this.onTrackingLinkClick),this.$trackingLinks[t]=null;this.$trackingLinks=null}onTrackingLinkClick(t){l.a.event(l.a.parseTrackerString(t.target.dataset.tracking))}open(){this.el.classList.add("is-open"),this.IS_OPEN=!0,this.$toggleBtn.setAttribute("aria-expanded",!0);const t=this.$panel.scrollHeight-this.$toggleBtn.offsetHeight;this.$spacer.style.height=this.$spacer.style.maxHeight=t+"px",this.trapFocus(),this.$firstFocusableEl.focus(),l.a.event({eventCategory:this.eventCategory,eventAction:"clicInteract",eventLabel:"ouvrirFiltres"})}close(){this.releaseFocus(),this.el.classList.remove("is-open"),this.$spacer.style.maxHeight=0,this.lastFocus.focus(),this.IS_OPEN=!1,this.$toggleBtn.setAttribute("aria-expanded",!1),l.a.event({eventCategory:this.eventCategory,eventAction:"clicInteract",eventLabel:"fermerFiltres"})}trapFocus(){this.lastFocus=document.activeElement,window.addEventListener("keydown",this.onKeyDown)}releaseFocus(){window.removeEventListener("keydown",this.onKeyDown)}onKeyDown(t){if(t.code)switch(t.code.toLowerCase()){case"tab":if(1===this.$focusableEls.length){t.preventDefault();break}t.shiftKey?this.handleBackwardTab(t):this.handleForwardTab(t);break;case"escape":this.close()}}handleBackwardTab(t){document.activeElement===this.$firstFocusableEl&&(t.preventDefault(),this.$lastFocusableEl.focus())}handleForwardTab(t){document.activeElement===this.$lastFocusableEl&&(t.preventDefault(),this.$firstFocusableEl.focus())}fetchItems(t=!1){this.IS_FETCHING=!0,document.body.classList.add("is-loading");const e=this.ITEMS_PER_PAGE*(this.CURRENT_PAGE-1),i=""===this.CURRENT_FILTER?null:`"${this.CURRENT_FILTER}"`;let s;s="blog"===this.TYPE?`\n            {\n                entries(section: "blog", limit: ${this.ITEMS_PER_PAGE}, offset: ${e}, orderBy: "postDate DESC", site: "${h.a.lang}", blogCategory: ${i}) {\n                  ... on blog_blog_Entry {\n                    url\n                    blogCategory {\n                      ... on blogCategories_Category {\n                        title\n                      }\n                    }\n                    title\n                    postDate @formatDateTime (format: "F Y")\n                    blogAuthor {\n                      ... on authors_c_authors_Entry {\n                        c_authorName\n                      }\n                    }\n                  }\n                }\n            }`:`\n            {\n                entries(section: "caseStudies", limit: ${this.ITEMS_PER_PAGE}, offset: ${e}, orderBy: "postDate DESC", site: "${h.a.lang}", caseCategory: ${i}) {\n                  ... on caseStudies_caseStudies_Entry {\n                    url\n                    caseThumb {\n                        url\n                    }\n                    caseCategory {\n                      ...on caseCategories_Category {\n                        title\n                      }\n                    }\n                    title\n                    postDate @formatDateTime (format: "F Y")\n                  }\n                }\n            }`;const n=window.location.protocol+"//"+window.location.hostname;fetch(n+"/api",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:s})}).then(t=>t.json()).then(e=>{this.appendItems(e.data.entries,t)})}appendItems(t,e){let i="";for(let e=0;e<t.length;e++)i+="blog"===this.TYPE?this.getBlogItem(t[e]):this.getCaseStudyItem(t[e]);const s=this.FILTERED?this.MAX_CAT_PAGE["filter"+this.CURRENT_FILTER]:this.MAX_PAGE;this.CURRENT_PAGE===s&&this.$moreBlock.classList.add("is-inactive"),e?this.$list.innerHTML=i:this.$list.innerHTML+=i,this.clearTracking(),this.initTracking(),this.IS_FETCHING=!1,document.body.classList.remove("is-loading")}getBlogItem(t){let e="fr"===h.a.lang?this.translateDate(t.postDate):t.postDate;return`\n        <a class="o-blog-item js-list-tracking" href="${t.url}" data-tracking="blogueAccueil|clicInterne|article-${t.title}">\n            <i class="o-icon o-icon--green"><svg><use xlink:href="#icon-chevron-right"></use></svg></i>\n            <p class="o-blog-item__category o-title-5">${t.blogCategory[0].title}</p>\n                <div class="o-blog-item__infos">\n                    <p class="o-blog-item__headline o-title-3">${t.title}</p>\n                    <p class="o-blog-item__details o-p-small"><span>${e}</span><i></i><span>${t.blogAuthor[0].c_authorName}</span></p>\n                </div>\n            </a>\n        `}translateDate(t){const e=t.split(" ");let i=e[0];const s=K.en.indexOf(i);return e[0]=i.replace(i,K.fr[s]),e.join(" ")}getCaseStudyItem(t){return`\n        <a class="o-case-study-item js-list-tracking" href="${t.url}" data-tracking="casAffairesAcceuil|clicInterne|casAffaire-${t.title}">\n            <div class="o-case-study-item__thumbnail">\n                <img src="${t.caseThumb[0].url}" alt="">\n            </div>\n            <p class="o-case-study-item__category o-title-5">${t.caseCategory[0].title}</p>\n            <p class="o-case-study-item__headline o-title-4">${t.title}</p>\n\n            <i class="o-icon">\n                <svg>\n                    <use xlink:href="#icon-chevron-right"></use>\n                </svg>\n            </i>\n        </a>\n        `}removeListeners(){window.removeEventListener("keydown",this.onKeyDown),this.$toggleBtn.removeEventListener("click",this.onToggleClick),this.$moreBtn.removeEventListener("click",this.onMoreClick),this.$toggleBtn=null,this.$panel=null,this.$moreBlock=null,this.$moreBtn=null,this.$list=null,this.$spacer=null,this.$firstFocusableEl=null,this.$lastFocusableEl=null;for(let t=0;t<this.$filtersBtn.length;t++)this.$filtersBtn[t].addEventListener("click",this.onFilterClick),this.$filtersBtn[t]=null;this.$filtersBtn=null;for(let t=0;t<this.$focusableEls.length;t++)this.$focusableEls[t]=null;this.$focusableEls=null}destroy(){super.destroy(),this.clearTracking(),this.removeListeners()}}class J extends c.a{constructor(t){super(t),this.onFormSubmit=this.onFormSubmit.bind(this);const e=this.el.dataset.componentId,i={fieldLabels:{email:newsletterLabel},submitText:newsletterCTA,required:newsletterRequired,invalidEmail:newsletterInvalidEmail},s={locale:h.a.lang,translations:{}};s.translations[""+h.a.lang]=i;const n={portalId:"56427",formId:"14b4b8f1-d1c7-4e96-9e49-f907fbda9474",formInstanceId:e,target:`[data-component-id="${e}"]`};hbspt.forms.create({...s,...n}),window.addEventListener("message",this.onFormSubmit)}onFormSubmit(t){this.timeout=setTimeout(()=>{if("hsFormCallback"===t.data.type&&"onFormSubmit"===t.data.eventName){if(this.el.querySelector("form"))return;window.removeEventListener("message",this.onFormSubmit),l.a.event({eventCategory:this.el.dataset.eventCategory,eventAction:"clicContact",eventLabel:"succesInfolettre"})}},500)}destroy(){super.destroy(),this.timeout&&clearTimeout(this.timeout),window.removeEventListener("message",this.onFormSubmit)}}class Q extends c.a{constructor(t){super(t),this.onScroll=this.onScroll.bind(this),this.$clone=this.el.cloneNode(!0),this.$clone.classList.add("is-clone"),this.$clone.classList.add("is-hidden"),this.headerActive=!1,!window.lastFilteredUrl||"blogIndex"!==window.lastNamespace&&"caseStudiesIndex"!==window.lastNamespace||(this.$backBtn=this.$clone.querySelector("a"),this.$backBtn.href=window.lastFilteredUrl),document.body.appendChild(this.$clone),window.addEventListener("scroll",this.onScroll)}onScroll(){!this.headerActive&&window.pageYOffset>60?(this.headerActive=!0,this.$clone.classList.add("is-active")):this.headerActive&&window.pageYOffset<=60&&(this.headerActive=!1,this.$clone.classList.remove("is-active"))}destroy(){super.destroy(),document.body.removeChild(this.$clone),this.$clone=null,this.$backBtn&&(this.$backBtn=null),window.lastFilteredUrl=void 0,window.removeEventListener("scroll",this.onScroll)}}var tt={AnimatedView:U,IntroView:class extends P{constructor(t,e={}){super(t,e),this.$title=this.$view.querySelector(".js-intro-title"),this.$text=this.$view.querySelector(".js-intro-text"),this.FIRST=!1,this.setupAnims()}setupAnims(){if(this.$title){new O.a({target:this.$title,by:"words",whitespace:!1})[0].words.forEach(t=>{t.innerHTML=`<span>${t.innerHTML}</span>`})}if(this.$text){new O.a({target:this.$text,by:"words",whitespace:!1})[0].words.forEach(t=>{t.innerHTML=`<span>${t.innerHTML}</span>`})}}update(t){super.update(t),this.visibility&&!this.visible?this.display():!this.visibility&&this.visible&&this.hide()}display(){this.visible=!0,this.$view.classList.add("is-active"),this.FIRST||(this.FIRST=!0,this.$view.classList.add("is-anim-in")),v.a.dispatch(f.a.INTRO_DISPLAY)}hide(){this.visible=!1,this.$view.classList.remove("is-active"),v.a.dispatch(f.a.INTRO_HIDE)}},HomeScroller:Y,HomeIntroView:class extends U{constructor(t){super(t,{intersectionRatio:.95,threshold:[0,.95]}),this.onTick=this.onTick.bind(this),this.$canvas=this.$view.querySelector("canvas"),this.createCanvas()}createCanvas(){this.time=0,this.context=this.$canvas.getContext("2d"),this.resizeCanvas();const t=this.$canvas.dataset.items.split(",");this.nodeGarden=new z(this.context,this.size,t)}display(){super.display(),clearTimeout(this.to),this.to=setTimeout(()=>{v.a.addListener(p.a.RAF_UPDATE,this.onTick)},500)}hide(){super.hide(),clearTimeout(this.to),v.a.removeListener(p.a.RAF_UPDATE,this.onTick),this.context.clearRect(0,0,this.size.w,this.size.h)}onTick(t){this.time+=t.data,this.context.clearRect(0,0,this.size.w,this.size.h),this.nodeGarden.update(this.time)}resizeCanvas(){this.dpr=Object(E.a)(window.devicePixelRatio,1,2);const t=window.innerWidth>window.innerHeight?window.innerHeight:window.innerWidth;this.size={w:t,h:t},this.$canvas.style.width=this.size.w+"px",this.$canvas.style.height=this.size.h+"px",this.$canvas.width=this.size.w*this.dpr,this.$canvas.height=this.size.h*this.dpr,this.context.scale(this.dpr,this.dpr),this.nodeGarden&&this.nodeGarden.resize(this.size)}onResize(){super.onResize(),this.resizeCanvas()}destroy(){super.destroy(),this.visible&&v.a.removeListener(p.a.RAF_UPDATE,this.onTick),this.$canvas=null,this.nodeGarden.destroy()}},AboutTimeline:class extends U{constructor(t){super(t),this.udpate=()=>{this.fold=T.instance.y+.5*window.innerHeight-1.5*this.dateHeight,this.scrollDelta=this.fold-this.offsetTop,this.scrollShift=this.scrollDelta<0?0:Math.floor(100*this.scrollDelta)/100,this.CURRENT_INDEX<this.COUNT&&(this.$datesHolder.style.transform=`translate3d(0, ${this.scrollShift}px, 0)`,this.$datesHolder.style.webkitTransform=`translate3d(0, ${this.scrollShift}px, 0)`);let t=0;for(let e=0;e<this.skillsBounds.length;e++)this.fold+this.topShift>this.skillsBounds[e]&&(t=e);this.CURRENT_INDEX!==t&&(this.$inner.style.transform=`translate3d(0, ${-this.dateHeight*t}px, 0)`,this.$inner.style.webkitTransform=`translate3d(0, ${-this.dateHeight*t}px, 0)`,this.$dates[this.CURRENT_INDEX].classList.remove("is-active"),this.$skills[this.CURRENT_INDEX].classList.remove("is-active"),this.$skills[t].classList.add("is-active"),this.$dates[t].classList.add("is-active"),this.CURRENT_INDEX=t)},this.$datesHolder=this.$view.querySelector(".js-timeline-dates"),this.$dates=[...this.$datesHolder.querySelectorAll(".js-timeline-date")],this.$inner=this.$datesHolder.querySelector(".js-timeline-inner"),this.$skills=[...this.$view.querySelectorAll(".js-timeline-skill")],this.CURRENT_INDEX=0,this.COUNT=this.$skills.length-1,this.$dates[this.CURRENT_INDEX].classList.add("is-active"),this.onResize()}display(){super.display(),v.a.addListener(p.a.RAF_UPDATE,this.udpate)}hide(){super.hide(),v.a.removeListener(p.a.RAF_UPDATE,this.udpate)}onResize(){super.onResize(),this.topShift=window.innerWidth>1024?100:40,this.skillsBounds=this.$skills.map(t=>Math.floor(T.instance.y+t.getBoundingClientRect().top)),this.dateHeight=this.$inner.children[0].offsetHeight,this.$datesHolder.style.height=this.dateHeight+"px"}destroy(){this.visible&&v.a.removeListener(p.a.RAF_UPDATE,this.udpate),super.destroy(),this.$datesHolder=null,this.$inner=null;for(let t=0;t<this.$skills.length;t++)this.$skills[t]=null;this.$skills=null}},ContactForm:V,Filters:Z,NewsletterForm:J,ContentHeader:Q};let et;et||(et=new class{constructor(){const t=navigator.userAgent.toLowerCase().indexOf("mobi")>-1||"touchOnly"===n.a.deviceType,e=t?"mobile":"desktop";document.body.classList.add(e);const i=document.querySelector('[data-barba="container"]').dataset.barbaNamespace;this.instance=new M({...window.context,mobile:t,namespace:i,projectName:"agiledss",version:"2.0.0",environment:"dev"},tt)}})},8:function(t,e,i){"use strict";e.a={ROUTER_BEFORE:"router:before",ROUTER_BEFORE_LEAVE:"router:before_leave",ROUTER_LEAVE:"router:leave",ROUTER_AFTER_LEAVE:"router:after_leave",ROUTER_BEFORE_ENTER:"router:before_enter",ROUTER_ENTER:"router:enter",ROUTER_AFTER_ENTER:"router:after_enter",ROUTER_AFTER:"router:after",HEADER_MENU_OPEN:"header:menu_open",HEADER_MENU_CLOSE:"header:menu_close",SMOOTHSCROLL_MUTATE:"smoothscroll:mutate",HOME_SCROLLER_CHANGE_SECTION:"home_scroller:change_section",INTRO_DISPLAY:"intro:display",INTRO_HIDE:"intro:hide"}}},[[63,1,2]]]);